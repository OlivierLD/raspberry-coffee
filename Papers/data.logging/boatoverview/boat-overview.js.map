{"version":3,"sources":["webpack://boat-overview/webpack/universalModuleDefinition","webpack://boat-overview/webpack/bootstrap","webpack://boat-overview/../utilities/Utilities.js","webpack://boat-overview/./BoatOverview.js"],"names":["lpad","str","len","pad","s","length","undefined","rpad","toRadians","deg","Math","PI","toDegrees","rad","deadReckoning","start","dist","bearing","radianDistance","finalLat","asin","sin","lat","cos","finalLng","lng","atan2","TO_NORTH","TO_SOUTH","TO_EAST","TO_WEST","calculateGreatCircle","arrival","nbPoints","ewDir","nsDir","abs","deltaG","route","interval","smallStart","g","deltag","tanStartAngle","tan","smallL","atan","rpG","routePoint","ari","_nsDir","arrG","staG","sign","_ewDir","_start","push","pos","z","calculateGreatCircleInDegrees","radRoute","degRoute","forEach","pt","decToSex","val","ns_ew","absVal","intValue","floor","dec","i","toFixed","getDir","x","y","dir","boatOverviewVerbose","BOAT_OVERVIEW_TAG_NAME","boatOverviewDefaultColorConfig","displayBackgroundGradient","from","to","gridColor","twArrowColor","bspArrowColor","cmgArrowColor","awArrowColor","gpsWsArrowColor","vmgArrowColor","dDWArrowColor","currentArrowColor","boatFillColor","boatOutlineColor","nmeaDataDisplayColor","calculatedDataDisplayColor","vmgDataDisplayColor","dDWDataDisplayColor","BoatOverview","_shadowRoot","attachShadow","mode","canvas","document","createElement","fallbackElemt","content","createTextNode","appendChild","shadowRoot","_width","_height","_bsp","_hdg","_aws","_awa","_tws","_twa","_twd","_vmg","_cog","_sog","_cdr","_csp","_lwy","_cmg","_b2wp","_Decl","_dev","_zoom","_withCurrent","_withLabels","_withGPS","_withWind","_withTrueWind","_withVMG","_vmgOnWind","_withW","_boatShape","_wpName","_previousClassName","boatOverviewColorConfig","speedScale","WL_RATIO_COEFF","BOAT_LENGTH","console","log","repaint","attrName","oldVal","newVal","parseInt","parseFloat","classNames","colorConfig","classes","split","cls","cssClassName","styleSheets","r","cssRules","selector","selectorText","indexOf","cssText","style","cssTextElems","elem","trim","keyValPair","key","value","err","drawBoatOverview","cw","width","ch","height","distFromRight","min","context","cWidth","cHeight","Utilities","twd","beginPath","center","getCanvasCenter","windLength","tws","dX","dY","line","Line","strokeStyle","fillStyle","lineWidth","drawWithAnemoArrowheads","closePath","font","fillText","twa","wd","hdg","awa","_awd","aws","bsp","bspLength","drawHollowArrow","lwy","cmg","drawWithArrowhead","Decl","dev","hdm","hdc","_hdm","_hdc","sog","cog","vmgOnWind","b2wp","_dX","_dY","wpLine","vmg","save","restore","setLineDash","moveTo","sogLength","lineTo","stroke","csp","dXcmg","dYcmg","dXcog","dYcog","cdr","awLength","dXaw","dYaw","twLength","dXtw","dYtw","trueHeading","boatLength","boatShape","xPoints","yPoints","ptX","ptY","dx","dy","round","fill","currentStyle","className","getColorConfig","getContext","scale","grd","createLinearGradient","addColorStop","fillRect","maxSpeed","max","ceil","circ","radius","arc","drawBoat","drawTrueWind","drawVW","drawAppWind","drawBSP","drawW","drawCMG","drawSOG","drawCurrent","drawVMG","txtY","space","col1","col2","mess","setAttribute","HTMLElement","Point","x1","y1","x2","y2","HEAD_LENGTH","HEAD_WIDTH","p","angle","ctx","drawWithArrowheads","both","startRadians","drawArrowhead","endRadians","headLength","arrowWidth","headWidth","sqrt","one","two","three","four","five","six","seven","eight","rotate","radians","translate","window","customElements","define"],"mappings":"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","file":"boat-overview.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"boat-overview\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"boat-overview\"] = factory();\n\telse\n\t\troot[\"boat-overview\"] = factory();\n})(window, function() {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./BoatOverview.js\");\n","/**\n *\n * Misc utilities used all over the place.\n */\nexport function lpad(str, len, pad) {\n\tlet s = str;\n\twhile (s.length < len) {\n\t\ts = (pad === undefined ? ' ' : pad) + s;\n\t}\n\treturn s;\n}\n\nexport function rpad(str, len, pad) {\n\tlet s = str;\n\twhile (s.length < len) {\n\t\ts += (pad === undefined ? ' ' : pad);\n\t}\n\treturn s;\n}\n\nexport function toRadians(deg) {\n\treturn deg * (Math.PI / 180);\n}\n\nexport function toDegrees(rad) {\n\treturn rad * (180 / Math.PI);\n}\n\n/**\n *\n * @param start { lat: xx, lng: xx }, L & G in Degrees\n * @param dist distance in nm\n * @param bearing route in Degrees\n * @return DR Position, L & G in Degrees\n */\nexport function deadReckoning(start, dist, bearing) {\n\tlet radianDistance = toRadians(dist / 60);\n\tlet finalLat = (Math.asin((Math.sin(toRadians(start.lat)) * Math.cos(radianDistance)) +\n\t\t\t(Math.cos(toRadians(start.lat)) * Math.sin(radianDistance) * Math.cos(toRadians(bearing)))));\n\tlet finalLng = toRadians(start.lng) + Math.atan2(Math.sin(toRadians(bearing)) * Math.sin(radianDistance) * Math.cos(toRadians(start.lat)),\n\t\t\tMath.cos(radianDistance) - Math.sin(toRadians(start.lat)) * Math.sin(finalLat));\n\tfinalLat = toDegrees(finalLat);\n\tfinalLng = toDegrees(finalLng);\n\n\treturn {lat: finalLat, lng: finalLng};\n}\n\nconst TO_NORTH = 0;\nconst TO_SOUTH = 1;\nconst TO_EAST = 2;\nconst TO_WEST = 3;\n\n/**\n * All in Radians\n *\n * @param start\n * @param arrival\n * @param nbPoints\n * @returns {Array}\n */\nexport function calculateGreatCircle(start, arrival, nbPoints) {\n\tvar ewDir;\n\tvar nsDir;\n\n\tif (arrival.lat > start.lat) {\n\t\tnsDir = TO_NORTH;\n\t} else {\n\t\tnsDir = TO_SOUTH;\n\t}\n\tif (arrival.lng > start.lng) {\n\t\tewDir = TO_EAST;\n\t} else {\n\t\tewDir = TO_WEST;\n\t}\n\tif (Math.abs(arrival.lng - start.lng) > Math.PI) {\n\t\tif (ewDir == TO_EAST) {\n\t\t\tewDir = TO_WEST;\n\t\t\tarrival.lng = (arrival.lng - (2 * Math.PI));\n\t\t} else {\n\t\t\tewDir = TO_EAST;\n\t\t\tarrival.lng = ((2 * Math.PI) + arrival.lng);\n\t\t}\n\t}\n\tlet deltaG = arrival.lng - start.lng;\n\tlet route = [];\n\tlet interval = deltaG / nbPoints;\n\tlet smallStart = { lat: start.lat, lng: start.lng };\n\n\tfor (let g = start.lng; route.length <= nbPoints; g += interval) {\n\t\tlet deltag = arrival.lng - g;\n\t\tlet tanStartAngle = Math.sin(deltag) / (Math.cos(smallStart.lat) * Math.tan(arrival.lat) - Math.sin(smallStart.lat) * Math.cos(deltag));\n\t\tlet smallL = Math.atan(Math.tan(smallStart.lat) * Math.cos(interval) + Math.sin(interval) / (tanStartAngle * Math.cos(smallStart.lat)));\n\t\tlet rpG = g + interval;\n\t\tif (rpG > Math.PI) {\n\t\t\trpG -= (2 * Math.PI);\n\t\t}\n\t\tif (rpG < -Math.PI) {\n\t\t\trpG = (2 * Math.PI) + rpG;\n\t\t}\n\t\tlet routePoint = { lat: smallL, lng: rpG };\n\t\tlet ari = toDegrees(Math.atan(tanStartAngle));\n\t\tif (ari < 0.0) {\n\t\t\tari = Math.abs(ari);\n\t\t}\n\t\tvar _nsDir;\n\t\tif (routePoint.lat > smallStart.lat) {\n\t\t\t_nsDir = TO_NORTH;\n\t\t} else {\n\t\t\t_nsDir = TO_SOUTH;\n\t\t}\n\t\tlet arrG = routePoint.lng;\n\t\tlet staG = smallStart.lng;\n\t\tif (Math.sign(arrG) != Math.sign(staG)) {\n\t\t\tif (Math.sign(arrG) > 0) {\n\t\t\t\tarrG -= (2 * Math.PI);\n\t\t\t} else {\n\t\t\t\tarrG = Math.PI - arrG;\n\t\t\t}\n\t\t}\n\t\tvar _ewDir;\n\t\tif (arrG > staG) {\n\t\t\t_ewDir = TO_EAST;\n\t\t} else {\n\t\t\t_ewDir = TO_WEST;\n\t\t}\n\t\tlet _start = 0.0;\n\t\tif (_nsDir == TO_SOUTH) {\n\t\t\t_start = 180;\n\t\t\tif (_ewDir == TO_EAST) {\n\t\t\t\tari = _start - ari;\n\t\t\t} else {\n\t\t\t\tari = _start + ari;\n\t\t\t}\n\t\t} else {\n\t\t\tif (_ewDir == TO_EAST) {\n\t\t\t\tari = _start + ari;\n\t\t\t} else {\n\t\t\t\tari = _start - ari;\n\t\t\t}\n\t\t}\n\t\twhile (ari < 0.0) {\n\t\t\tari += 360;\n\t\t}\n\t\troute.push({ pos: smallStart, z: (arrival === smallStart) ? null : ari });\n\t\tsmallStart = routePoint;\n\t}\n\treturn route;\n}\n\nexport function calculateGreatCircleInDegrees(start, arrival, nbPoints) {\n\tlet radRoute = calculateGreatCircle(\n\t\t\t{ lat: toRadians(start.lat), lng: toRadians(start.lng) },\n\t\t\t{ lat: toRadians(arrival.lat), lng: toRadians(arrival.lng) },\n\t\t\tnbPoints);\n\tlet degRoute = [];\n\tradRoute.forEach(pt => {\n\t\tdegRoute.push({ pos: { lat: toDegrees(pt.pos.lat), lng: toDegrees(pt.pos.lng) }, z: pt.z });\n\t});\n\treturn degRoute;\n}\n\nexport function decToSex(val, ns_ew) {\n\tlet absVal = Math.abs(val);\n\tlet intValue = Math.floor(absVal);\n\tlet dec = absVal - intValue;\n\tlet i = intValue;\n\tdec *= 60;\n//    let s = i + \"\" + dec.toFixed(2) + \"'\";\n//    let s = i + String.fromCharCode(176) + dec.toFixed(2) + \"'\";\n\tlet s = \"\";\n\tif (ns_ew !== undefined) {\n\t\tif (val < 0) {\n\t\t\ts += (ns_ew === 'NS' ? 'S' : 'W');\n\t\t} else {\n\t\t\ts += (ns_ew === 'NS' ? 'N' : 'E');\n\t\t}\n\t\ts += \" \";\n\t} else {\n\t\tif (val < 0) {\n\t\t\ts += '-'\n\t\t}\n\t}\n\ts += i + \"\" + dec.toFixed(2) + \"'\";\n\n\treturn s;\n}\n\nexport function getDir(x, y) {\n\tlet dir = 0.0;\n\tif (y != 0) {\n\t\tdir = toDegrees(Math.atan(x / y));\n\t}\n\tif (x <= 0 || y <= 0) {\n\t\tif (x > 0 && y < 0) {\n\t\t\tdir += 180;\n\t\t} else if (x < 0 && y > 0) {\n\t\t\tdir += 360;\n\t\t} else if (x < 0 && y < 0) {\n\t\t\tdir += 180;\n\t\t} else if (x == 0) {\n\t\t\tif (y > 0) {\n\t\t\t\tdir = 0.0;\n\t\t\t} else {\n\t\t\t\tdir = 180;\n\t\t\t}\n\t\t} else if (y == 0) {\n\t\t\tif (x > 0) {\n\t\t\t\tdir = 90;\n\t\t\t} else {\n\t\t\t\tdir = 270;\n\t\t\t}\n\t\t}\n\t}\n\tdir += 180;\n\twhile (dir >= 360) {\n\t\tdir -= 360;\n\t}\n\treturn dir;\n}\n","/*\n * HTML Color names: https://www.w3schools.com/colors/colors_names.asp\n *\n * Attributes:\n * Values: width, height, BSP, HDG, AWS, AWA, TWS, TWA, TWD, CDR, CSP, Leeway, CMG, VMG, B2WP, Decl, dev\n * Booleans: displayCurrent, displayLabels, displayVMG, vmgOnWind or vmgOnWP, with D, d, W\n * Options: BoatShape (mono, cata, tri, plane), WPName\n *\n * Designed to represent the data coming from the NavServer.\n * NOTE: The consistency of the data is not maintained by the Component!!\n * Example:\n{\n  \"Damping\": 30,\n  \"HDG Offset\": 0,\n  \"To Waypoint\": \"RANGI   \",\n  \"CDR\": {\n    \"angle\": 115.39230004857473\n  },\n  \"Daily\": {\n    \"distance\": 12.2\n  },\n  \"Max Leeway\": 10,\n  \"VMG on Wind\": -3.8584310339481522,\n  \"HDG c.\": {\n    \"angle\": 213\n  },\n  \"CMG\": {\n    \"angle\": 222.01692220976113\n  },\n  \"BSP\": {\n    \"speed\": 7.1\n  },\n  \"TWA\": {\n    \"angle\": -130.38922223613739\n  },\n  \"TWD\": {\n    \"angle\": 91\n  },\n  \"Current calculated with damping\": {\n    \"30000\": {\n      \"bufferLength\": 30000,\n      \"speed\": {\n        \"speed\": 0.32396646536173773\n      },\n      \"direction\": {\n        \"angle\": 48.891255868064114\n      },\n      \"nbPoints\": 11,\n      \"oldest\": \"Sun, 2010 Nov 21 22:07:44 UTC\",\n      \"latest\": \"Sun, 2010 Nov 21 22:07:44 UTC\",\n      \"len\": 30000\n    },\n    \"60000\": {\n      \"bufferLength\": 60000,\n      \"speed\": {\n        \"speed\": 0.32396646536173773\n      },\n      \"direction\": {\n        \"angle\": 48.891255868064114\n      },\n      \"nbPoints\": 11,\n      \"oldest\": \"Sun, 2010 Nov 21 22:07:14 UTC\",\n      \"latest\": \"Sun, 2010 Nov 21 22:07:44 UTC\",\n      \"len\": 30000\n    },\n    \"600000\": {\n      \"bufferLength\": 600000,\n      \"speed\": {\n        \"speed\": 0.32396646536173773\n      },\n      \"direction\": {\n        \"angle\": 48.891255868064114\n      },\n      \"nbPoints\": 11,\n      \"oldest\": \"Sun, 2010 Nov 21 22:07:14 UTC\",\n      \"latest\": \"Sun, 2010 Nov 21 22:07:44 UTC\",\n      \"len\": 30000\n    }\n  },\n  \"Position\": {\n    \"lat\": -9.108366666666667,\n    \"lng\": -140.20933333333332\n  },\n  \"Log\": {\n    \"distance\": 3013\n  },\n  \"Solar Time\": {\n    \"date\": \"Nov 21, 2010, 4:46:56 AM\",\n    \"fmtDate\": {\n      \"epoch\": 0,\n      \"year\": 0,\n      \"month\": 0,\n      \"day\": 0,\n      \"hour\": 12,\n      \"min\": 46,\n      \"sec\": 56\n    }\n  },\n  \"BSP Factor\": 1,\n  \"Set and Drift\": {\n    \"speed\": 0.32,\n    \"angle\": 49\n  },\n  \"From Waypoint\": \"\",\n  \"TWS\": {\n    \"speed\": 18.5\n  },\n  \"GPS Time\": {\n    \"date\": \"Nov 21, 2010, 2:07:47 PM\",\n    \"fmtDate\": {\n      \"epoch\": 0,\n      \"year\": 0,\n      \"month\": 0,\n      \"day\": 0,\n      \"hour\": 22,\n      \"min\": 7,\n      \"sec\": 47\n    }\n  },\n  \"Distance to WP\": {\n    \"distance\": 561.7\n  },\n  \"AWS Factor\": 1,\n  \"Water Temperature\": {\n    \"temperature\": 26.5\n  },\n  \"Small Distance\": 0.06425312432932662,\n  \"NMEA\": \"$CCVDR,49.0,T,39.0,M,0.32,N*0F\\r\\n\",\n  \"NMEA_AS_IS\": {\n    \"VLW\": \"$IIVLW,03013,N,012.2,N*53\\r\",\n    \"VHW\": \"$IIVHW,,,213,M,07.1,N,,*62\\r\",\n    \"VDR\": \"$CCVDR,49.0,T,39.0,M,0.32,N*0F\\r\\n\",\n    \"GLL\": \"$IIGLL,0906.498,S,14012.558,W,220745,A,A*5D\\r\",\n    \"RMB\": \"$IIRMB,A,3.00,R,,RANGI   ,,,,,561.70,230,06.7,V,A*02\\r\",\n    \"RMC\": \"$IIRMC,220747,A,0906.502,S,14012.560,W,06.9,215,211110,10,E,A*00\\r\",\n    \"DPT\": \"$IIDPT,001.3,+0.7,*42\\r\",\n    \"HDG\": \"$IIHDG,211,,,10,E*11\\r\",\n    \"MWV\": \"$CCMWV,230.0,T,018.5,N,A*36\\r\\n\",\n    \"VWR\": \"$IIVWR,109,L,15.8,N,,,,*7B\\r\",\n    \"MTW\": \"$IIMTW,+26.5,C*39\\r\",\n    \"VWT\": \"$CCVWT,130.4,L,18.5,N,9.5,M,34.3,K*53\\r\\n\",\n    \"MWD\": \"$CCMWD,091.0,T,081.0,M,18.5,N,9.5,M*75\\r\\n\"\n  },\n  \"D\": {\n    \"angle\": 10\n  },\n  \"XTE\": {\n    \"distance\": 3\n  },\n  \"AWA\": {\n    \"angle\": -109\n  },\n  \"Depth\": {\n    \"depthInMeters\": 2\n  },\n  \"Bearing to WP\": {\n    \"angle\": 230\n  },\n  \"W\": {\n    \"angle\": 9.01692220976113\n  },\n  \"Speed to WP\": {\n    \"speed\": 6.7\n  },\n  \"COG\": {\n    \"angle\": 215\n  },\n  \"AWS\": {\n    \"speed\": 15.8\n  },\n  \"HDG true\": {\n    \"angle\": 222.01692220976113\n  },\n  \"AWA Offset\": 0,\n  \"CSP\": {\n    \"speed\": 0.8796925520240182\n  },\n  \"d\": {\n    \"angle\": -0.9830777902388692\n  },\n  \"Default Declination\": {\n    \"angle\": 14\n  },\n  \"Deviation file name\": \"dp_2011_04_15.csv\",\n  \"HDG mag.\": {\n    \"angle\": 212.01692220976113\n  },\n  \"SOG\": {\n    \"speed\": 6.9\n  },\n  \"Leeway\": {\n    \"angle\": 0\n  },\n  \"GPS Date & Time\": {\n    \"date\": \"Nov 21, 2010, 2:07:47 PM\",\n    \"epoch\": 1290377267000,\n    \"fmtDate\": {\n      \"epoch\": 1290377267000,\n      \"year\": 2010,\n      \"month\": 11,\n      \"day\": 21,\n      \"hour\": 22,\n      \"min\": 7,\n      \"sec\": 47\n    }\n  },\n  \"WayPoint pos\": {\n    \"lat\": 0,\n    \"lng\": 0\n  },\n  \"VMG to Waypoint\": 6.664888201394572,\n  \"Steer\": \"R\"\n}\n *\n */\nconst boatOverviewVerbose = false;\nconst BOAT_OVERVIEW_TAG_NAME = 'boat-overview';\n\nconst boatOverviewDefaultColorConfig = {\n\tdisplayBackgroundGradient: {\n\t\tfrom: 'silver',\n\t\tto: 'lightgray'\n\t},\n\tgridColor: 'gray',\n\n\ttwArrowColor: 'black',\n\tbspArrowColor: 'red',\n\tcmgArrowColor:'cyan',\n\tawArrowColor: 'blue',\n\tgpsWsArrowColor: 'coral',\n\tvmgArrowColor: 'red',\n\tdDWArrowColor: 'yellow',\n\tcurrentArrowColor: 'royalblue',\n\tboatFillColor: 'silver',\n\tboatOutlineColor: 'blue',\n\n\tnmeaDataDisplayColor: 'royalblue',\n\tcalculatedDataDisplayColor: 'darkcyan',\n\tvmgDataDisplayColor: 'red',\n\tdDWDataDisplayColor: 'yellow',\n\n};\n\nimport * as Utilities from \"../utilities/Utilities.js\";\n\n/* global HTMLElement */\nclass BoatOverview extends HTMLElement {\n\n\tstatic get observedAttributes() { // That's a big one...\n\t\treturn [\n\t\t\t\"width\",        // Integer. Canvas width\n\t\t\t\"height\",       // Integer. Canvas height\n\t\t\t\"bsp\",          // Float. Boat Speed Numeric value, knots\n\t\t\t\"hdg\",          // Integer, True Heading [0..360]\n\t\t\t\"aws\",          // Float. App Wind Speed Numeric value, knots\n\t\t\t\"awa\",          // Integer. App Wind Angle [-180..180] Numeric value\n\t\t\t\"tws\",          // Float. True Wind Speed Numeric value, knots\n\t\t\t\"twa\",          // Integer. True Wind Angle [-180..180] Numeric value\n\t\t\t\"twd\",          // Integer. True Wind Direction [0..360] Numeric value\n\t\t\t\"vmg\",          // Float. Velocity Made Good value, knots\n\t\t\t\"sog\",          // Float. Speed Over Ground Numeric value, knots\n\t\t\t\"cog\",          // Integer. Course Over Ground [0..360] Numeric value\n\t\t\t\"cdr\",          // Integer. Current Direction [0..360] Numeric value\n\t\t\t\"csp\",          // Float. Current Speed Numeric value, knots\n\t\t\t\"lwy\",          // Float. Leeway [-180..180] Numeric value\n\t\t\t\"cmg\",          // Integer. Course Made Good [0..360] Numeric value\n\t\t\t\"b2wp\",         // Integer. Bearing to Next Way Point [0..360] Numeric value\n\t\t\t\"decl\",         // Float. Magnetic Declination Numeric value +/-\n\t\t\t\"dev\",          // Float. Magnetic deviation Numeric value +/-\n\t\t\t\"with-current\", // Boolean. Draw current\n\t\t\t\"with-gps\",    // Boolean. Draw SOG & COG\n\t\t\t\"with-wind\",    // Boolean. Draw wind (app & true)\n\t\t\t\"with-true-wind\", // Boolean. Draw true wind\n\t\t\t\"with-labels\",  // Boolean. Draw Labels on graphic\n\t\t\t\"with-vmg\",     // Boolean. Draw VMG\n\t\t\t\"vmg-on-wind\",  // Boolean. true: on Wind, false: on WayPoint\n\t\t\t\"with-w\",       // Boolean. Draw D & d\n\t\t\t\"boat-shape\",   // String. MONO, CATA, TRI, PLANE\n\t\t\t\"zoom-on-boat\", // Float, enforce zoom in (>1) or out (<1). Default 1\n\t\t\t\"wp-name\"       // String. Next WayPoint name\n\n\t\t];\n\t}\n\n\tconstructor() {\n\t\tsuper();\n\t\tthis._shadowRoot = this.attachShadow({mode: 'open'}); // 'open' means it is accessible from external JavaScript.\n\t\t// create and append a <canvas>\n\t\tthis.canvas = document.createElement(\"canvas\");\n\t\tlet fallbackElemt = document.createElement(\"h1\");\n\t\tlet content = document.createTextNode(\"This is a Boat Overview Web Component, on an HTML5 canvas\");\n\t\tfallbackElemt.appendChild(content);\n\t\tthis.canvas.appendChild(fallbackElemt);\n\t\tthis.shadowRoot.appendChild(this.canvas);\n\n\t\t// Default values\n\t\tthis._width = 600;\n\t\tthis._height = 500;\n\n\t\tthis._bsp = 0; // Boat Speed\n\t\tthis._hdg = 0; // True Heading\n\t\tthis._aws = 0; // App Wind Speed\n\t\tthis._awa = 0; // App Wind Angle\n\t\tthis._tws = 0; // True Wind Speed\n\t\tthis._twa = 0; // True Wind Angle\n\t\tthis._twd = 0; // True Wind Direction\n\t\tthis._vmg = 0; // Velocity Made Good\n\t\tthis._cog = 0; // Course Over Ground\n\t\tthis._sog = 0; // Speed Over Ground\n\t\tthis._cdr = 0; // Current Direction\n\t\tthis._csp = 0; // Current Speed\n\t\tthis._lwy = 0; // Leeway\n\t\tthis._cmg = 0; // Course Made Good\n\t\tthis._b2wp = 0; // Bearing to WP\n\t\tthis._Decl = 0;   // Declination\n\t\tthis._dev = 0;   // deviation\n\n\t\tthis._zoom = 1.0;\n\n\t\tthis._withCurrent = false;\n\t\tthis._withLabels = true\n\t\tthis._withGPS = true;\n\t\tthis._withWind = true;\n\t\tthis._withTrueWind = true;\n\t\tthis._withVMG = true;\n\t\tthis._vmgOnWind = true; // False means vmg on WP\n\t\tthis._withW = false;    // Requires D and d\n\n\t\tthis._boatShape = \"MONO\"; // \"CATA\"; //\"MONO\"; // \"TRI\"; // \"PLANE\";\n\t\tthis._wpName = \"\";\n\n\t\tthis._previousClassName = \"\";\n\t\tthis.boatOverviewColorConfig = boatOverviewDefaultColorConfig;\n\n\t\tthis.speedScale = 10; // Default value\n\n\t\tthis.WL_RATIO_COEFF = 0.75; // Ratio to apply to (3.5 * Width / Length)\n\t\tthis.BOAT_LENGTH = 100; // 50;\n\t}\n\n\t// Called whenever the custom element is inserted into the DOM.\n\tconnectedCallback() {\n\t\tif (boatOverviewVerbose) {\n\t\t\tconsole.log(\"connectedCallback invoked.\");\n\t\t}\n\t\tthis.repaint();\n\t}\n\n\t// Called whenever the custom element is removed from the DOM.\n\tdisconnectedCallback() {\n\t\tif (boatOverviewVerbose) {\n\t\t\tconsole.log(\"disconnectedCallback invoked\");\n\t\t}\n\t}\n\n\t// Called whenever an attribute is added, removed or updated.\n\t// Only attributes listed in the observedAttributes property are affected.\n\tattributeChangedCallback(attrName, oldVal, newVal) {\n\t\tif (boatOverviewVerbose) {\n\t\t\tconsole.log(\"attributeChangedCallback invoked on \" + attrName + \" from \" + oldVal + \" to \" + newVal);\n\t\t}\n\t\tswitch (attrName) {\n\t\t\tcase \"width\":\n\t\t\t\tthis._width = parseInt(newVal);\n\t\t\t\tbreak;\n\t\t\tcase \"height\":\n\t\t\t\tthis._height = parseInt(newVal);\n\t\t\t\tbreak;\n\t\t\tcase \"bsp\":\n\t\t\t\tthis._bsp = parseFloat(newVal);\n\t\t\t\tbreak;\n\t\t\tcase \"hdg\":\n\t\t\t\tthis._hdg = parseInt(newVal);\n\t\t\t\tbreak;\n\t\t\tcase \"aws\":\n\t\t\t\tthis._aws = parseFloat(newVal);\n\t\t\t\tbreak;\n\t\t\tcase \"awa\":\n\t\t\t\tthis._awa = parseInt(newVal);\n\t\t\t\tbreak;\n\t\t\tcase \"tws\":\n\t\t\t\tthis._tws = parseFloat(newVal);\n\t\t\t\tbreak;\n\t\t\tcase \"twa\":\n\t\t\t\tthis._twa = parseInt(newVal);\n\t\t\t\tbreak;\n\t\t\tcase \"twd\":\n\t\t\t\tthis._twd = parseInt(newVal);\n\t\t\t\tbreak;\n\t\t\tcase \"vmg\":\n\t\t\t\tthis._vmg = parseFloat(newVal);\n\t\t\t\tbreak;\n\t\t\tcase \"sog\":\n\t\t\t\tthis._sog = parseFloat(newVal);\n\t\t\t\tbreak;\n\t\t\tcase \"cog\":\n\t\t\t\tthis._cog = parseInt(newVal);\n\t\t\t\tbreak;\n\t\t\tcase \"cdr\":\n\t\t\t\tthis._cdr = parseInt(newVal);\n\t\t\t\tbreak;\n\t\t\tcase \"csp\":\n\t\t\t\tthis._csp = parseFloat(newVal);\n\t\t\t\tbreak;\n\t\t\tcase \"lwy\":\n\t\t\t\tthis._lwy = parseFloat(newVal);\n\t\t\t\tbreak;\n\t\t\tcase \"cmg\":\n\t\t\t\tthis._cmg = parseInt(newVal);\n\t\t\t\tbreak;\n\t\t\tcase \"b2wp\":\n\t\t\t\tthis._b2wp = parseFloat(newVal);\n\t\t\t\tbreak;\n\t\t\tcase \"decl\":\n\t\t\t\tthis._Decl = parseFloat(newVal);\n\t\t\t\tbreak;\n\t\t\tcase \"dev\":\n\t\t\t\tthis._dev = parseFloat(newVal);\n\t\t\t\tbreak;\n\n\t\t\tcase \"zoom-on-boat\":\n\t\t\t\tthis._zoom = parseFloat(newVal);\n\t\t\t\tbreak;\n\n\t\t\tcase \"with-current\":\n\t\t\t\tthis._withCurrent = (newVal === 'true');\n\t\t\t\tbreak;\n\t\t\tcase \"with-gps\":\n\t\t\t\tthis._withGPS = (newVal === 'true');\n\t\t\t\tbreak;\n\t\t\tcase \"with-true-wind\":\n\t\t\t\tthis._withTrueWind = (newVal === 'true');\n\t\t\t\tbreak;\n\t\t\tcase \"with-wind\":\n\t\t\t\tthis._withWind = (newVal === 'true');\n\t\t\t\tbreak;\n\t\t\tcase \"with-labels\":\n\t\t\t\tthis._withLabels = (newVal === 'true');\n\t\t\t\tbreak;\n\t\t\tcase \"with-vmg\":\n\t\t\t\tthis._withVMG = (newVal === 'true');\n\t\t\t\tbreak;\n\t\t\tcase \"vmg-on-wind\":\n\t\t\t\tthis._vmgOnWind = (newVal === 'true');\n\t\t\t\tbreak;\n\t\t\tcase \"with-w\":\n\t\t\t\tthis._withW = (newVal === 'true');\n\t\t\t\tbreak;\n\n\t\t\tcase \"boat-shape\":\n\t\t\t\tconsole.log('BoatShape changing')\n\t\t\t\tif (newVal === 'MONO' || newVal === 'CATA' || newVal === 'TRI' || newVal === 'PLANE') {\n\t\t\t\t\tthis._boatShape = newVal;\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase \"wp-name\":\n\t\t\t\tthis._wpName = newVal;\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tbreak;\n\t\t}\n\t\tthis.repaint();\n\t}\n\n\t// Called whenever the custom element has been moved into a new document.\n\tadoptedCallback() {\n\t\tif (boatOverviewVerbose) {\n\t\t\tconsole.log(\"adoptedCallback invoked\");\n\t\t}\n\t}\n\n\t// Setters\n\tset width(val) {\n\t\tthis.setAttribute(\"width\", val);\n\t}\n\n\tset height(val) {\n\t\tthis.setAttribute(\"height\", val);\n\t}\n\n\tset bsp(val) {\n\t\tthis.setAttribute(\"bsp\", val);\n\t}\n\n\tset hdg(val) {\n\t\tthis.setAttribute(\"hdg\", val);\n\t}\n\n\tset aws(val) {\n\t\tthis.setAttribute(\"aws\", val);\n\t}\n\n\tset awa(val) {\n\t\tthis.setAttribute(\"awa\", val);\n\t}\n\n\tset tws(val) {\n\t\tthis.setAttribute(\"tws\", val);\n\t}\n\n\tset twa(val) {\n\t\tthis.setAttribute(\"twa\", val);\n\t}\n\n\tset twd(val) {\n\t\tthis.setAttribute(\"twd\", val);\n\t}\n\n\tset vmg(val) {\n\t\tthis.setAttribute(\"vmg\", val);\n\t}\n\n\tset cog(val) {\n\t\tthis.setAttribute(\"cog\", val);\n\t}\n\n\tset sog(val) {\n\t\tthis.setAttribute(\"sog\", val);\n\t}\n\n\tset cdr(val) {\n\t\tthis.setAttribute(\"cdr\", val);\n\t}\n\n\tset csp(val) {\n\t\tthis.setAttribute(\"csp\", val);\n\t}\n\n\tset lwy(val) {\n\t\tthis.setAttribute(\"lwy\", val);\n\t}\n\n\tset cmg(val) {\n\t\tthis.setAttribute(\"cmg\", val);\n\t}\n\n\tset b2wp(val) {\n\t\tthis.setAttribute(\"b2wp\", val);\n\t}\n\n\tset Decl(val) {\n\t\tthis.setAttribute(\"decl\", val);\n\t}\n\n\tset dev(val) {\n\t\tthis.setAttribute(\"dev\", val);\n\t}\n\n\tset zoomOnBoat(val) {\n\t\tthis.setAttribute(\"zoom-on-boat\", val);\n\t}\n\n\tset withGPS(val) {\n\t\tthis.setAttribute(\"with-gps\", val);\n\t}\n\n\tset withCurrent(val) {\n\t\tthis.setAttribute(\"with-current\", val);\n\t}\n\n\tset withTrueWind(val) {\n\t\tthis.setAttribute(\"with-true-wind\", val);\n\t}\n\n\tset withWind(val) {\n\t\tthis.setAttribute(\"with-wind\", val);\n\t}\n\n\tset withLabels(val) {\n\t\tthis.setAttribute(\"with-labels\", val);\n\t}\n\n\tset withVMG(val) {\n\t\tthis.setAttribute(\"with-vmg\", val);\n\t}\n\n\tset vmgOnWind(val) {\n\t\tthis.setAttribute(\"vmg-on-wind\", val);\n\t}\n\n\tset withW(val) {\n\t\tthis.setAttribute(\"with-w\", val);\n\t}\n\n\tset wpName(val) {\n\t\tthis.setAttribute(\"wp-name\", val);\n\t}\n\n\tset boatShape(val) {\n\t\tthis.setAttribute(\"boat-shape\", val);\n\t}\n\n\tset shadowRoot(val) {\n\t\tthis._shadowRoot = val;\n\t}\n\n\t// Getters\n\tget width() {\n\t\treturn this._width;\n\t}\n\n\tget height() {\n\t\treturn this._height;\n\t}\n\n\tget bsp() {\n\t\treturn this._bsp;\n\t}\n\n\tget hdg() {\n\t\treturn this._hdg;\n\t}\n\n\tget aws() {\n\t\treturn this._aws;\n\t}\n\n\tget awa() {\n\t\treturn this._awa;\n\t}\n\n\tget twa() {\n\t\treturn this._twa;\n\t}\n\n\tget tws() {\n\t\treturn this._tws;\n\t}\n\n\tget twd() {\n\t\treturn this._twd;\n\t}\n\n\tget vmg() {\n\t\treturn this._vmg;\n\t}\n\n\tget cog() {\n\t\treturn this._cog;\n\t}\n\n\tget sog() {\n\t\treturn this._sog;\n\t}\n\n\tget cdr() {\n\t\treturn this._cdr;\n\t}\n\n\tget csp() {\n\t\treturn this._csp;\n\t}\n\n\tget lwy() {\n\t\treturn this._lwy;\n\t}\n\n\tget cmg() {\n\t\treturn this._cmg;\n\t}\n\n\tget b2wp() {\n\t\treturn this._b2wp;\n\t}\n\n\tget Decl() {\n\t\treturn this._Decl;\n\t}\n\n\tget dev() {\n\t\treturn this._dev;\n\t}\n\n\tget zoomOnBoat() {\n\t\treturn this._zoom;\n\t}\n\n\tget withGPS() {\n\t\treturn this._withGPS;\n\t}\n\n\tget withCurrent() {\n\t\treturn this._withCurrent;\n\t}\n\n\tget withTrueWind() {\n\t\treturn this._withTrueWind;\n\t}\n\n\tget withWind() {\n\t\treturn this._withWind;\n\t}\n\n\tget withLabels() {\n\t\treturn this._withLabels;\n\t}\n\n\tget withVMG() {\n\t\treturn this._withVMG;\n\t}\n\n\tget vmgOnWind() {\n\t\treturn this._vmgOnWind;\n\t}\n\n\tget withW() {\n\t\treturn this._withW;\n\t}\n\n\tget wpName() {\n\t\treturn this._wpName;\n\t}\n\n\tget boatShape() {\n\t\treturn this._boatShape;\n\t}\n\n\tget shadowRoot() {\n\t\treturn this._shadowRoot;\n\t}\n\n\t// Component methods\n\tgetColorConfig(classNames) {\n\t\tlet colorConfig = boatOverviewDefaultColorConfig;\n\t\tlet classes = classNames.split(\" \");\n\t\tfor (let cls = 0; cls < classes.length; cls++) {\n\t\t\tlet cssClassName = classes[cls];\n\t\t\tfor (let s = 0; s < document.styleSheets.length; s++) {\n\t\t\t\t// console.log(\"Walking though \", document.styleSheets[s]);\n\t\t\t\ttry {\n\t\t\t\t\tfor (let r = 0; document.styleSheets[s].cssRules !== null && r < document.styleSheets[s].cssRules.length; r++) {\n\t\t\t\t\t\tlet selector = document.styleSheets[s].cssRules[r].selectorText;\n\t\t\t\t\t\t//\t\t\tconsole.log(\">>> \", selector);\n\t\t\t\t\t\tif (selector !== undefined && (selector === '.' + cssClassName || (selector.indexOf('.' + cssClassName) > -1 && selector.indexOf(BOAT_OVERVIEW_TAG_NAME) > -1))) { // Cases like \"tag-name .className\"\n\t\t\t\t\t\t\t//\t\t\t\tconsole.log(\"  >>> Found it! [%s]\", selector);\n\t\t\t\t\t\t\tlet cssText = document.styleSheets[s].cssRules[r].style.cssText;\n\t\t\t\t\t\t\tlet cssTextElems = cssText.split(\";\");\n\t\t\t\t\t\t\tcssTextElems.forEach(function (elem) {\n\t\t\t\t\t\t\t\tif (elem.trim().length > 0) {\n\t\t\t\t\t\t\t\t\tlet keyValPair = elem.split(\":\");\n\t\t\t\t\t\t\t\t\tlet key = keyValPair[0].trim();\n\t\t\t\t\t\t\t\t\tlet value = keyValPair[1].trim();\n\t\t\t\t\t\t\t\t\tswitch (key) {\n\t\t\t\t\t\t\t\t\t\tcase '--display-background-gradient-from':\n\t\t\t\t\t\t\t\t\t\t\tcolorConfig.displayBackgroundGradient.from = value;\n\t\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\t\tcase '--display-background-gradient-to':\n\t\t\t\t\t\t\t\t\t\t\tcolorConfig.displayBackgroundGradient.to = value;\n\t\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\t\tcase '--grid-color':\n\t\t\t\t\t\t\t\t\t\t\tcolorConfig.gridColor = value;\n\t\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\t\tcase '--tw-arrow-color':\n\t\t\t\t\t\t\t\t\t\t\tcolorConfig.twArrowColor = value;\n\t\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\t\tcase '--bsp-arrow-color':\n\t\t\t\t\t\t\t\t\t\t\tcolorConfig.bspArrowColor = value;\n\t\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\t\tcase '--cmg-arrow-color':\n\t\t\t\t\t\t\t\t\t\t\tcolorConfig.cmgArrowColor = value;\n\t\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\t\tcase '--aw-arrow-color':\n\t\t\t\t\t\t\t\t\t\t\tcolorConfig.awArrowColor = value;\n\t\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\t\tcase '--gps-ws-arrow-color':\n\t\t\t\t\t\t\t\t\t\t\tcolorConfig.gpsWsArrowColor = value;\n\t\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\t\tcase '--vmg-arrow-color':\n\t\t\t\t\t\t\t\t\t\t\tcolorConfig.vmgArrowColor = value;\n\t\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\t\tcase '--variation-arrow-color':\n\t\t\t\t\t\t\t\t\t\t\tcolorConfig.dDWArrowColor = value;\n\t\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\t\tcase '--current-arrow-color':\n\t\t\t\t\t\t\t\t\t\t\tcolorConfig.currentArrowColor = value;\n\t\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\t\tcase '--boat-fill-color':\n\t\t\t\t\t\t\t\t\t\t\tcolorConfig.boatFillColor = value;\n\t\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\t\tcase '--boat-outline-color':\n\t\t\t\t\t\t\t\t\t\t\tcolorConfig.boatOutlineColor = value;\n\t\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\t\tcase '--nmea-display-color':\n\t\t\t\t\t\t\t\t\t\t\tcolorConfig.nmeaDataDisplayColor = value;\n\t\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\t\tcase '--calculated-color':\n\t\t\t\t\t\t\t\t\t\t\tcolorConfig.calculatedDataDisplayColor = value;\n\t\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\t\tcase '--variation-display-color':\n\t\t\t\t\t\t\t\t\t\t\tcolorConfig.dDWDataDisplayColor = value;\n\t\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\t\tcase '--vmg-display-color':\n\t\t\t\t\t\t\t\t\t\t\tcolorConfig.vmgDataDisplayColor = value;\n\t\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t} catch (err) {\n\t\t\t\t\t// Absorb\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn colorConfig;\n\t}\n\n\trepaint() {\n\t\tthis.drawBoatOverview();\n\t}\n\n\tgetCanvasCenter() {\n\t\tlet cw = this.width;\n\t\tlet ch = this.height;\n\t\tlet distFromRight = Math.min(cw, ch) / 2;\n\n\t\treturn { x: cw - distFromRight, y: ch / 2};\n\t}\n\n\tdrawTrueWind(context) {\n\t\tlet cWidth  = this.width;\n\t\tlet cHeight = this.height;\n\n\t\tlet _twd = Utilities.toRadians(this.twd);\n\t\tcontext.beginPath();\n\t\tlet center = this.getCanvasCenter();\n\t\tlet x = center.x;\n\t\tlet y = center.y;\n\n\t\tlet windLength = this._zoom * this.tws * ((Math.min(cHeight, cWidth) / 2) / this.speedScale);\n\t\tlet dX = windLength * Math.sin(_twd);\n\t\tlet dY = - windLength * Math.cos(_twd);\n\t\t// create a new line object\n\t\tlet line = new Line(x + dX, y + dY, x, y);\n\t\t// draw the line\n\t\tcontext.strokeStyle = this.boatOverviewColorConfig.twArrowColor;\n\t\tcontext.fillStyle   = this.boatOverviewColorConfig.twArrowColor;\n\t\tcontext.lineWidth = 5;\n\t\tline.drawWithAnemoArrowheads(context);\n\t\tcontext.closePath();\n\t\tif (this._withLabels) {\n\t\t\tcontext.font= \"bold 12px Arial\";\n\t\t\tcontext.fillStyle = this.boatOverviewColorConfig.twArrowColor;\n\t\t\tcontext.fillText(\"TWS:\" + this.tws.toFixed(2) + \" kts\", x + dX, y + dY);\n\t\t\tcontext.fillText(\"TWA:\" + this.twa + \"\", x + dX, y + dY + 14);\n\t\t}\n\t}\n\n\tdrawAppWind(context) {\n\t\tlet cWidth  = this.width;\n\t\tlet cHeight = this.height;\n\n\t\tlet wd = this.hdg + this.awa; // Direction the wind is blowing TO\n\t\twhile (wd > 360) {\n\t\t\twd -= 360;\n\t\t}\n\t\tlet _awd = Utilities.toRadians(wd);\n\t\tcontext.beginPath();\n\t\tlet center = this.getCanvasCenter();\n\t\tlet x = center.x;\n\t\tlet y = center.y;\n\n\t\tlet windLength = this._zoom * this.aws * ((Math.min(cHeight, cWidth) / 2) / this.speedScale);\n\t\tlet dX = windLength * Math.sin(_awd);\n\t\tlet dY = - windLength * Math.cos(_awd);\n\t\t// create a new line object\n\t\tlet line = new Line(x + dX, y + dY, x, y);\n\t\t// draw the line\n\t\tcontext.strokeStyle = this.boatOverviewColorConfig.awArrowColor;\n\t\tcontext.fillStyle   = this.boatOverviewColorConfig.awArrowColor;\n\t\tcontext.lineWidth = 5;\n\t\tline.drawWithAnemoArrowheads(context);\n\t\tcontext.closePath();\n\t\tif (this._withLabels) {\n\t\t\tcontext.font= \"bold 12px Arial\";\n\t\t\tcontext.fillStyle = this.boatOverviewColorConfig.awArrowColor;\n\t\t\tcontext.fillText(\"AWS:\" + this.aws + \" kts\", x + dX, y + dY);\n\t\t\tcontext.fillText(\"AWA:\" + this.awa + \"\", x + dX, y + dY + 14);\n\t\t}\n\t}\n\n\tdrawBSP(context) {\n\t\tif (this.bsp === 0) {\n\t\t\treturn;\n\t\t}\n\n\t\tlet cWidth  = this.width;\n\t\tlet cHeight = this.height;\n\n\t\tlet _hdg = Utilities.toRadians(this.hdg);\n\t\tcontext.beginPath();\n\t\tlet center = this.getCanvasCenter();\n\t\tlet x = center.x;\n\t\tlet y = center.y;\n\n\t\tlet bspLength = this._zoom * this.bsp * ((Math.min(cHeight, cWidth) / 2) / this.speedScale);\n\t\tlet dX = bspLength * Math.sin(_hdg);\n\t\tlet dY = - bspLength * Math.cos(_hdg);\n\t\t// create a new line object\n\t\tlet line = new Line(x, y, x + dX, y + dY);\n\t\t// draw the line\n\t\tcontext.strokeStyle = this.boatOverviewColorConfig.bspArrowColor;\n\t\tcontext.lineWidth = 3;\n\t\tline.drawHollowArrow(context);\n\t\tcontext.closePath();\n//    let metrics = context.measureText(valueToDisplay);\n//    len = metrics.width;\n\t\tif (this._withLabels) {\n\t\t\tcontext.font= \"bold 12px Arial\";\n\t\t\tcontext.fillStyle = this.boatOverviewColorConfig.bspArrowColor;\n\t\t\tcontext.fillText(\"BSP:\" + this.bsp.toFixed(2) + \" kts\", x + dX, y + dY);\n\t\t\tcontext.fillText(\"HDG:\" + this.hdg.toFixed(0) + \"\", x + dX, y + dY + 14);\n\t\t}\n\t}\n\n\tdrawCMG(context) {\n\t\tif (this.bsp === 0 || this.lwy === 0) {\n\t\t\treturn;\n\t\t}\n\n\t\tlet cWidth  = this.width;\n\t\tlet cHeight = this.height;\n\n\t\tlet _hdg = Utilities.toRadians(this.cmg);\n\t\tcontext.beginPath();\n\t\tlet center = this.getCanvasCenter();\n\t\tlet x = center.x;\n\t\tlet y = center.y;\n\n\t\tlet bspLength = this._zoom * this.bsp * ((Math.min(cHeight, cWidth) / 2) / this.speedScale);\n\t\tlet dX = bspLength * Math.sin(_hdg);\n\t\tlet dY = - bspLength * Math.cos(_hdg);\n\t\t// create a new line object\n\t\tlet line = new Line(x, y, x + dX, y + dY);\n\t\t// draw the line\n\t\tcontext.strokeStyle = this.boatOverviewColorConfig.cmgArrowColor;\n\t\tcontext.fillStyle   = this.boatOverviewColorConfig.cmgArrowColor;\n\t\tcontext.lineWidth = 5;\n\t\tline.drawWithArrowhead(context);\n\t\tcontext.closePath();\n\t\tif (this._withLabels) {\n\t\t\tcontext.font= \"bold 12px Arial\";\n\t\t\tcontext.fillStyle = this.boatOverviewColorConfig.calculatedDataDisplayColor;\n\t\t\tcontext.fillText(\"CMG:\" + this.cmg.toFixed(0) + \"\", x + dX, y + dY);\n\t\t}\n\t}\n\n\tdrawW(context) {\n\t\tif (this.bsp === 0 || (this.Decl === 0 && this.dev === 0)) {\n\t\t\treturn;\n\t\t}\n\n\t\tlet cWidth  = this.width;\n\t\tlet cHeight = this.height;\n\n\t\tlet hdm = this.hdg + this.Decl;\n\t\tlet hdc = hdm + this.dev;\n\n\t\tlet _hdm = Utilities.toRadians(hdm);\n\t\tcontext.beginPath();\n\t\tlet center = this.getCanvasCenter();\n\t\tlet x = center.x;\n\t\tlet y = center.y;\n\n\t\tlet bspLength = this._zoom * this.bsp * ((Math.min(cHeight, cWidth) / 2) / this.speedScale);\n\t\tlet dX = bspLength * Math.sin(_hdm);\n\t\tlet dY = - bspLength * Math.cos(_hdm);\n\t\t// create a new line object\n\t\tlet line = new Line(x, y, x + dX, y + dY);\n\t\t// draw the line\n\t\tcontext.strokeStyle = this.boatOverviewColorConfig.dDWArrowColor;\n\t\tcontext.fillStyle   = this.boatOverviewColorConfig.dDWArrowColor;\n\t\tcontext.lineWidth = 5;\n\t\tline.drawWithArrowhead(context);\n\t\tcontext.closePath();\n\t\tif (this._withLabels) {\n\t\t\tcontext.font= \"bold 12px Arial\";\n\t\t\tcontext.fillStyle = this.boatOverviewColorConfig.dDWDataDisplayColor;\n\t\t\tcontext.fillText(\"HDM:\" + hdm.toFixed(0) + \"\", x + dX, y + dY);\n\t\t}\n\t\tlet _hdc = Utilities.toRadians(hdc);\n\t\tcontext.beginPath();\n\n\t\tdX = bspLength * Math.sin(_hdc);\n\t\tdY = - bspLength * Math.cos(_hdc);\n\t\t// create a new line object\n\t\tline = new Line(x, y, x + dX, y + dY);\n\t\t// draw the line\n\t\tcontext.strokeStyle = this.boatOverviewColorConfig.dDWArrowColor;\n\t\tcontext.fillStyle   = this.boatOverviewColorConfig.dDWArrowColor;\n\t\tcontext.lineWidth = 5;\n\t\tline.drawWithArrowhead(context);\n\t\tcontext.closePath();\n\t\tif (this._withLabels) {\n\t\t\tcontext.font= \"bold 12px Arial\";\n\t\t\tcontext.fillStyle = this.boatOverviewColorConfig.dDWDataDisplayColor;\n\t\t\tcontext.fillText(\"HDC:\" + hdc.toFixed(0) + \"\", x + dX, y + dY);\n\t\t}\n\t}\n\tdrawSOG(context) {\n\t\tif (this.sog === 0) {\n\t\t\treturn;\n\t\t}\n\n\t\tlet cWidth  = this.width;\n\t\tlet cHeight = this.height;\n\n\t\tlet _hdg = Utilities.toRadians(this.cog);\n\t\tcontext.beginPath();\n\t\tlet center = this.getCanvasCenter();\n\t\tlet x = center.x;\n\t\tlet y = center.y;\n\n\t\tlet bspLength = this._zoom * this.sog * ((Math.min(cHeight, cWidth) / 2) / this.speedScale);\n\t\tlet dX = bspLength * Math.sin(_hdg);\n\t\tlet dY = - bspLength * Math.cos(_hdg);\n\t\t// create a new line object\n\t\tlet line = new Line(x, y, x + dX, y + dY);\n\t\t// draw the line\n\t\tcontext.strokeStyle = this.boatOverviewColorConfig.gpsWsArrowColor;\n\t\tcontext.fillStyle   = this.boatOverviewColorConfig.gpsWsArrowColor;\n\t\tcontext.lineWidth = 5;\n\t\tline.drawWithArrowhead(context);\n\t\tcontext.closePath();\n\t\tif (this._withLabels) {\n\t\t\tcontext.font= \"bold 12px Arial\";\n\t\t\tcontext.fillStyle = this.boatOverviewColorConfig.gpsWsArrowColor;\n\t\t\tcontext.fillText(\"SOG:\" + this.sog + \" kts\", x + dX, y + dY);\n\t\t\tcontext.fillText(\"COG:\" + this.cog + \"\", x + dX, y + dY + 14);\n\t\t\tcontext.lineWidth = 1;\n\t\t}\n\t}\n\n\tdrawVMG(context) {\n\t\tlet cWidth = this.width;\n\t\tlet cHeight = this.height;\n\n\t\tlet _hdg = 0;\n\t\tcontext.beginPath();\n\t\tlet center = this.getCanvasCenter();\n\t\tlet x = center.x;\n\t\tlet y = center.y;\n\n\t\tif (this.vmgOnWind) {\n\t\t\t_hdg = Utilities.toRadians(this.twd);\n\t\t} else {\n\t\t\t_hdg = Utilities.toRadians(this.b2wp);\n\t\t\t// Display WP direction\n\t\t\tcontext.strokeStyle = this.boatOverviewColorConfig.vmgArrowColor;\n\t\t\tcontext.fillStyle   = this.boatOverviewColorConfig.vmgArrowColor;\n\t\t\tcontext.lineWidth = 1;\n\t\t\tlet len = 0.75 * Math.min(cHeight, cWidth) / 2;\n\t\t\tlet _dX = len * Math.sin(_hdg);\n\t\t\tlet _dY = - len * Math.cos(_hdg);\n\t\t\tlet wpLine = new Line(x, y, x + _dX, y + _dY);\n\t\t\twpLine.drawWithArrowhead(context);\n\t\t\tcontext.fillText(this._wpName, x + _dX, y + _dY);\n\t\t}\n\n\t\tlet bspLength = this._zoom * this.vmg * ((Math.min(cHeight, cWidth) / 2) / this.speedScale);\n\t\tlet dX = bspLength * Math.sin(_hdg);\n\t\tlet dY = - bspLength * Math.cos(_hdg);\n\t\t// create a new line object\n\t\tlet line = new Line(x, y, x + dX, y + dY);\n\t\t// draw the line\n\t\tcontext.strokeStyle = this.boatOverviewColorConfig.vmgArrowColor;\n\t\tcontext.fillStyle   = this.boatOverviewColorConfig.vmgArrowColor;\n\t\tcontext.lineWidth = 5;\n\t\tline.drawWithArrowhead(context);\n\t\tcontext.closePath();\n\t\tif (this._withLabels) {\n\t\t\tcontext.save();\n\t\t\tcontext.font= \"bold 12px Arial\";\n\t\t\tcontext.fillStyle = this.boatOverviewColorConfig.vmgArrowColor;\n\t\t\tcontext.fillText(\"VMG:\" + this.vmg.toFixed(2) + \" kts\", x + dX, y + dY);\n\t\t\tcontext.restore();\n\t\t}\n\t\tif (context.setLineDash !== undefined) {\n\t\t\tcontext.setLineDash([5]);\n\t\t\tcontext.moveTo(x + dX, y + dY);\n\t\t\tlet _cog = Utilities.toRadians(this.cog);\n\t\t\tlet sogLength = this._zoom * this.sog * ((Math.min(cHeight, cWidth) / 2) / this.speedScale);\n\t\t\tdX = sogLength * Math.sin(_cog);\n\t\t\tdY = - sogLength * Math.cos(_cog);\n\t\t\tcontext.lineTo(x + dX, y + dY);\n\t\t\tcontext.lineWidth = 1;\n\t\t\tcontext.stroke();\n\t\t\t// Reset\n\t\t\tcontext.setLineDash([]);\n\t\t}\n\t}\n\n\tdrawCurrent(context) {\n\t\tif (this.csp === 0) {\n\t\t\treturn;\n\t\t}\n\n\t\tlet cWidth = this.width;\n\t\tlet cHeight = this.height;\n\n\t\tlet center = this.getCanvasCenter();\n\t\tlet x = center.x;\n\t\tlet y = center.y;\n\n\t\tlet _cmg = Utilities.toRadians(this.cmg);\n\t\tlet bspLength = this._zoom * this.bsp * ((Math.min(cHeight, cWidth) / 2) / this.speedScale);\n\t\tlet dXcmg = bspLength * Math.sin(_cmg);\n\t\tlet dYcmg = - bspLength * Math.cos(_cmg);\n\n\t\tlet _cog = Utilities.toRadians(this.cog);\n\t\tlet sogLength = this._zoom * this.sog * ((Math.min(cHeight, cWidth) / 2) / this.speedScale);\n\t\tlet dXcog = sogLength * Math.sin(_cog);\n\t\tlet dYcog = - sogLength * Math.cos(_cog);\n\n\t\tcontext.beginPath();\n\t\t// create a new line object\n\t\tlet line = new Line(x + dXcmg, y + dYcmg, x + dXcog, y + dYcog);\n\t\t// draw the line\n\t\tcontext.strokeStyle = this.boatOverviewColorConfig.currentArrowColor;\n\t\tcontext.fillStyle   = this.boatOverviewColorConfig.currentArrowColor;\n\t\tcontext.lineWidth = 5;\n\t\tline.drawWithArrowhead(context);\n\t\tcontext.closePath();\n\t\tif (this._withLabels) {\n\t\t\tcontext.font= \"bold 12px Arial\";\n\t\t\tcontext.fillStyle = this.boatOverviewColorConfig.currentArrowColor;\n\t\t\tcontext.fillText(\"CSP:\" + this.csp.toFixed(2) + \" kts\", x + dXcog, y + dYcog + 28); // + 14 not to overlap the SOG/COG\n\t\t\tcontext.fillText(\"CDR:\" + this.cdr.toFixed(0) + \"\", x + dXcog, y + dYcog + 42);\n\t\t}\n\t}\n\n\tdrawVW(context) { // Velocity Wind\n\t\tif (this.sog === 0) {\n\t\t\treturn;\n\t\t}\n\n\t\tlet cWidth = this.width;\n\t\tlet cHeight = this.height;\n\n\t\tlet center = this.getCanvasCenter();\n\t\tlet x = center.x;\n\t\tlet y = center.y;\n\n\t\tlet wd = this.hdg + this.awa; // Direction the wind is blowing TO\n\t\twhile (wd > 360) {\n\t\t\twd -= 360;\n\t\t}\n\t\tlet _awd = Utilities.toRadians(wd);\n\t\tcontext.beginPath();\n\t\tlet awLength = this._zoom * this.aws * ((Math.min(cHeight, cWidth) / 2) / this.speedScale);\n\t\tlet dXaw = awLength * Math.sin(_awd);\n\t\tlet dYaw = - awLength * Math.cos(_awd);\n\n\t\tlet _twd = Utilities.toRadians(this.twd);\n\t\tlet twLength = this._zoom * this.tws * ((Math.min(cHeight, cWidth) / 2) / this.speedScale);\n\t\tlet dXtw = twLength * Math.sin(_twd);\n\t\tlet dYtw = - twLength * Math.cos(_twd);\n\n\t\tcontext.beginPath();\n\t\t// create a new line object\n\t\tlet line = new Line(x + dXaw, y + dYaw, x + dXtw, y + dYtw);\n\t\t// draw the line\n\t\tcontext.strokeStyle = this.boatOverviewColorConfig.gpsWsArrowColor;\n\t\tcontext.fillStyle   = this.boatOverviewColorConfig.gpsWsArrowColor;\n\t\tcontext.lineWidth = 5;\n\t\tline.drawWithAnemoArrowheads(context);\n\t\tcontext.closePath();\n\t}\n\n\tdrawBoat(context, trueHeading) {\n\t\tlet x = [];\n\t\tlet y = [];// Half, length\n\n\t\tlet boatLength = this.BOAT_LENGTH * this._zoom;\n\n\t\tif (this.boatShape === 'MONO') {\n\t\t\t// Width\n\t\t\tx.push(this.WL_RATIO_COEFF * 0); // Bow\n\t\t\t//     Starboard\n\t\t\tx.push(this.WL_RATIO_COEFF * (   1 * boatLength) / 7);\n\t\t\tx.push(this.WL_RATIO_COEFF * (   2 * boatLength) / 7);\n\t\t\tx.push(this.WL_RATIO_COEFF * (   2 * boatLength) / 7);\n\t\t\tx.push(this.WL_RATIO_COEFF * ( 1.5 * boatLength) / 7); // Transom, starboard\n\t\t\t//     Port\n\t\t\tx.push(this.WL_RATIO_COEFF * (-1.5 * boatLength) / 7); // Transom, port\n\t\t\tx.push(this.WL_RATIO_COEFF * (  -2 * boatLength) / 7);\n\t\t\tx.push(this.WL_RATIO_COEFF * (  -2 * boatLength) / 7);\n\t\t\tx.push(this.WL_RATIO_COEFF * (  -1 * boatLength) / 7);\n\n\t\t\t// Length\n\t\t\ty.push((-4 * boatLength) / 7); // Bow\n\t\t\t//      Starboard\n\t\t\ty.push((-3 * boatLength) / 7);\n\t\t\ty.push((-1 * boatLength) / 7);\n\t\t\ty.push( (1 * boatLength) / 7);\n\t\t\ty.push( (3 * boatLength) / 7);\n\t\t\t//     Port\n\t\t\ty.push( (3 * boatLength) / 7);\n\t\t\ty.push( (1 * boatLength) / 7);\n\t\t\ty.push((-1 * boatLength) / 7);\n\t\t\ty.push((-3 * boatLength) / 7);\n\n\t\t} else if (this.boatShape === 'CATA') {\n\t\t\tx.push(this.WL_RATIO_COEFF * 0); // Arm, front, center\n\t\t\t// Starboard\n\t\t\tx.push(this.WL_RATIO_COEFF * (   1 * boatLength) / 7); // Arm starboard, hull side\n\t\t\tx.push(this.WL_RATIO_COEFF * ( 1.5 * boatLength) / 7); // Starboard bow\n\t\t\tx.push(this.WL_RATIO_COEFF * (   2 * boatLength) / 7);\n\t\t\tx.push(this.WL_RATIO_COEFF * (   2 * boatLength) / 7);\n\t\t\tx.push(this.WL_RATIO_COEFF * (   2 * boatLength) / 7);\n\t\t\tx.push(this.WL_RATIO_COEFF * ( 1.8 * boatLength) / 7); // Starboard transform, ext\n\t\t\tx.push(this.WL_RATIO_COEFF * ( 1.2 * boatLength) / 7); // Starboard transform, int\n\t\t\tx.push(this.WL_RATIO_COEFF * (   1 * boatLength) / 7); // Arm, back, starboard, hull side\n\t\t\tx.push(this.WL_RATIO_COEFF * (   0 * boatLength) / 7); // Arm, back, starboard, center\n\t\t\t// Port\n\t\t\tx.push(this.WL_RATIO_COEFF * (  -0 * boatLength) / 7);\n\t\t\tx.push(this.WL_RATIO_COEFF * (  -1 * boatLength) / 7);\n\t\t\tx.push(this.WL_RATIO_COEFF * (-1.2 * boatLength) / 7);\n\t\t\tx.push(this.WL_RATIO_COEFF * (-1.8 * boatLength) / 7);\n\t\t\tx.push(this.WL_RATIO_COEFF * (  -2 * boatLength) / 7);\n\t\t\tx.push(this.WL_RATIO_COEFF * (  -2 * boatLength) / 7);\n\t\t\tx.push(this.WL_RATIO_COEFF * (  -2 * boatLength) / 7);\n\t\t\tx.push(this.WL_RATIO_COEFF * (-1.5 * boatLength) / 7);\n\t\t\tx.push(this.WL_RATIO_COEFF * (  -1 * boatLength) / 7);\n\n\t\t\t// Length\n\t\t\ty.push((-1 * boatLength) / 7);\n\t\t\t//   Starboard\n\t\t\ty.push((-1 * boatLength) / 7);\n\t\t\ty.push((-4 * boatLength) / 7); // Bow\n\t\t\ty.push((-1 * boatLength) / 7);\n\t\t\ty.push((0 * boatLength) / 7);\n\t\t\ty.push((1 * boatLength) / 7);\n\t\t\ty.push((3 * boatLength) / 7);\n\t\t\ty.push((3 * boatLength) / 7);\n\t\t\ty.push((1 * boatLength) / 7);\n\t\t\ty.push((1 * boatLength) / 7);\n\t\t\t//    Port\n\t\t\ty.push((1 * boatLength) / 7);\n\t\t\ty.push((1 * boatLength) / 7); // Bow\n\t\t\ty.push((3 * boatLength) / 7);\n\t\t\ty.push((3 * boatLength) / 7);\n\t\t\ty.push((1 * boatLength) / 7);\n\t\t\ty.push((0 * boatLength) / 7);\n\t\t\ty.push((-1 * boatLength) / 7);\n\t\t\ty.push((-4 * boatLength) / 7);\n\t\t\ty.push((-1 * boatLength) / 7);\n\n\t\t} else if (this.boatShape === 'TRI') {\n\t\t\t// Width\n\t\t\tx.push(this.WL_RATIO_COEFF * 0); // Bow, center hull\n\t\t\t// Starboard\n\t\t\tx.push(this.WL_RATIO_COEFF * (  0.3 * boatLength) / 7);\n\t\t\tx.push(this.WL_RATIO_COEFF * (  0.6 * boatLength) / 7); // Arm, front, starboard, inside\n\t\t\tx.push(this.WL_RATIO_COEFF * (  1.6 * boatLength) / 7); // Arm, front, starboard, outside\n\t\t\tx.push(this.WL_RATIO_COEFF * (  1.8 * boatLength) / 7); // Outrigger bow\n\t\t\tx.push(this.WL_RATIO_COEFF * (    2 * boatLength) / 7);\n\t\t\tx.push(this.WL_RATIO_COEFF * (    2 * boatLength) / 7);\n\t\t\tx.push(this.WL_RATIO_COEFF * (  1.9 * boatLength) / 7); // Outrigger transom, ext\n\t\t\tx.push(this.WL_RATIO_COEFF * (  1.7 * boatLength) / 7); // Outrigger transom, int\n\t\t\tx.push(this.WL_RATIO_COEFF * (  1.6 * boatLength) / 7); // Arm, back, starboard, outside\n\t\t\tx.push(this.WL_RATIO_COEFF * (  0.6 * boatLength) / 7); // Arm, back, starboard, inside\n\t\t\tx.push(this.WL_RATIO_COEFF * (  0.3 * boatLength) / 7); // Main hull, transom starboard,\n\t\t\t// Port\n\t\t\tx.push(this.WL_RATIO_COEFF * ( -0.3 * boatLength) / 7);\n\t\t\tx.push(this.WL_RATIO_COEFF * ( -0.6 * boatLength) / 7);\n\t\t\tx.push(this.WL_RATIO_COEFF * ( -1.6 * boatLength) / 7);\n\t\t\tx.push(this.WL_RATIO_COEFF * ( -1.7 * boatLength) / 7); // Outrigger transom, int\n\t\t\tx.push(this.WL_RATIO_COEFF * ( -1.9 * boatLength) / 7); // Outrigger transom, ext\n\t\t\tx.push(this.WL_RATIO_COEFF * (   -2 * boatLength) / 7);\n\t\t\tx.push(this.WL_RATIO_COEFF * (   -2 * boatLength) / 7);\n\t\t\tx.push(this.WL_RATIO_COEFF * ( -1.8 * boatLength) / 7); // Outrigger bow\n\t\t\tx.push(this.WL_RATIO_COEFF * ( -1.6 * boatLength) / 7); // Arm, front, starboard, outside\n\t\t\tx.push(this.WL_RATIO_COEFF * ( -0.6 * boatLength) / 7); // Arm, front, starboard, inside\n\t\t\tx.push(this.WL_RATIO_COEFF * ( -0.3 * boatLength) / 7);\n\n\t\t\t// Length\n\t\t\ty.push((-4 * boatLength) / 7); // Bow\n\t\t\t// Starboard\n\t\t\ty.push((-3 * boatLength) / 7);\n\t\t\ty.push((-1 * boatLength) / 7); // Starboard arm, front\n\t\t\ty.push((-1 * boatLength) / 7); // Starboard arm, front, outrigger\n\t\t\ty.push((-2.6 * boatLength) / 7); // Starboard outrigger bow\n\t\t\ty.push((-1.5 * boatLength) / 7);\n\t\t\ty.push(( 1.5 * boatLength) / 7);\n\t\t\ty.push(( 2.5 * boatLength) / 7); // Starboard transom, ext\n\t\t\ty.push(( 2.5 * boatLength) / 7); // Starboard transom, ext\n\t\t\ty.push(( 1 * boatLength) / 7); // Starboard arm, back, outrigger\n\t\t\ty.push(( 1 * boatLength) / 7); // Starboard arm, hull\n\t\t\ty.push(( 3 * boatLength) / 7);\n\t\t\t// Port\n\t\t\ty.push(( 3 * boatLength) / 7);\n\t\t\ty.push(( 1 * boatLength) / 7);\n\t\t\ty.push(( 1 * boatLength) / 7);\n\t\t\ty.push(( 2.5 * boatLength) / 7);\n\t\t\ty.push(( 2.5 * boatLength) / 7);\n\t\t\ty.push(( 1.5 * boatLength) / 7);\n\t\t\ty.push((-1.5 * boatLength) / 7);\n\t\t\ty.push((-2.6 * boatLength) / 7);\n\t\t\ty.push((-1 * boatLength) / 7);\n\t\t\ty.push((-1 * boatLength) / 7);\n\t\t\ty.push((-3 * boatLength) / 7);\n\t\t} else if (this.boatShape === 'PLANE') {\n\t\t\t// Width\n\t\t\tx.push(this.WL_RATIO_COEFF * 0); // Nose\n\t\t\t// Starboard\n\t\t\tx.push(this.WL_RATIO_COEFF * (  0.3 * boatLength) / 7);\n\t\t\tx.push(this.WL_RATIO_COEFF * (  0.6 * boatLength) / 7); // Wing, front, starboard, inside\n\t\t\tx.push(this.WL_RATIO_COEFF * (  4 * boatLength) / 7); // Wing, front, starboard, outside\n\t\t\tx.push(this.WL_RATIO_COEFF * (  4 * boatLength) / 7); // Wing, outside, back\n\t\t\tx.push(this.WL_RATIO_COEFF * (  0.6 * boatLength) / 7); // Wing, back, starboard, inside\n\t\t\tx.push(this.WL_RATIO_COEFF * (  0.3 * boatLength) / 7); // Main hull, transom starboard,\n\t\t\tx.push(this.WL_RATIO_COEFF * (    2 * boatLength) / 7); // Main hull, back wing, front\n\t\t\tx.push(this.WL_RATIO_COEFF * (    2 * boatLength) / 7); // Main hull, back wing, back, ext\n\t\t\tx.push(this.WL_RATIO_COEFF * (  0.1 * boatLength) / 7); // Main hull, back wing, back, int\n\t\t\t// Port\n\t\t\tx.push(this.WL_RATIO_COEFF * ( -0.1 * boatLength) / 7); // Main hull, back wing, back, int\n\t\t\tx.push(this.WL_RATIO_COEFF * (   -2 * boatLength) / 7); // Main hull, back wing, back, ext\n\t\t\tx.push(this.WL_RATIO_COEFF * (   -2 * boatLength) / 7); // Main hull, back wing, front\n\t\t\tx.push(this.WL_RATIO_COEFF * ( -0.3 * boatLength) / 7); // Main hull, transom starboard,\n\t\t\tx.push(this.WL_RATIO_COEFF * ( -0.6 * boatLength) / 7); // Wing, back, starboard, inside\n\t\t\tx.push(this.WL_RATIO_COEFF * ( -4 * boatLength) / 7); // Outrigger bow\n\t\t\tx.push(this.WL_RATIO_COEFF * ( -4 * boatLength) / 7); // Arm, front, starboard, outside\n\t\t\tx.push(this.WL_RATIO_COEFF * ( -0.6 * boatLength) / 7); // Arm, front, starboard, inside\n\t\t\tx.push(this.WL_RATIO_COEFF * ( -0.3 * boatLength) / 7);\n\n\t\t\t// Length\n\t\t\ty.push((-4 * boatLength) / 7); // Nose\n\t\t\t// Starboard\n\t\t\ty.push((-3 * boatLength) / 7);\n\t\t\ty.push((-2 * boatLength) / 7);\n\t\t\ty.push((-1 * boatLength) / 7);\n\t\t\ty.push(( 0 * boatLength) / 7);\n\t\t\ty.push((-0.5 * boatLength) / 7);\n\t\t\ty.push(( 1.8 * boatLength) / 7);\n\t\t\ty.push(( 2.5 * boatLength) / 7);\n\t\t\ty.push(( 3 * boatLength) / 7);\n\t\t\ty.push(( 2.8 * boatLength) / 7);\n\t\t\t// Port\n\t\t\ty.push(( 2.8 * boatLength) / 7);\n\t\t\ty.push(( 3 * boatLength) / 7);\n\t\t\ty.push(( 2.5 * boatLength) / 7);\n\t\t\ty.push(( 1.8 * boatLength) / 7);\n\t\t\ty.push((-0.5 * boatLength) / 7);\n\t\t\ty.push(( 0 * boatLength) / 7);\n\t\t\ty.push((-1 * boatLength) / 7);\n\t\t\ty.push((-2 * boatLength) / 7);\n\t\t\ty.push((-3 * boatLength) / 7);\n\t\t}\n\t\tlet xPoints = [];\n\t\tlet yPoints = [];\n\n\t\t// Rotation matrix:\n\t\t// | cos(alpha)  -sin(alpha) |\n\t\t// | sin(alpha)   cos(alpha) |\n\t\t// The center happens to be the middle of the boat.\n\n\t\tlet center = this.getCanvasCenter();\n\t\tlet ptX = center.x;\n\t\tlet ptY = center.y;\n\n\t\tfor (let i=0; i<x.length; i++) { // Rotation\n\t\t\tlet dx = x[i] * Math.cos(Utilities.toRadians(trueHeading)) + (y[i] * (-Math.sin(Utilities.toRadians(trueHeading))));\n\t\t\tlet dy = x[i] * Math.sin(Utilities.toRadians(trueHeading)) + (y[i] *   Math.cos(Utilities.toRadians(trueHeading)));\n\t\t\txPoints.push(Math.round(ptX + dx));\n\t\t\tyPoints.push(Math.round(ptY + dy));\n\t\t}\n\t\tcontext.fillStyle = this.boatOverviewColorConfig.boatFillColor;\n\t\tcontext.beginPath();\n\t\tcontext.moveTo(xPoints[0], yPoints[0]);\n\t\tfor (let i=1; i<xPoints.length; i++) {\n\t\t\tcontext.lineTo(xPoints[i], yPoints[i]);\n\t\t}\n\t\tcontext.closePath();\n\t\tcontext.fill();\n\t\tcontext.strokeStyle = this.boatOverviewColorConfig.boatOutlineColor;\n\t\tcontext.lineWidth = 2;\n\t\tcontext.stroke();\n\t}\n\n\tdrawBoatOverview() {\n\n\t\tlet currentStyle = this.className;\n\t\tif (this._previousClassName !== currentStyle || true) {\n\t\t\t// Reload\n\t\t\t//\tconsole.log(\"Reloading CSS\");\n\t\t\ttry {\n\t\t\t\tthis.boatOverviewColorConfig = this.getColorConfig(currentStyle);\n\t\t\t} catch (err) {\n\t\t\t\t// Absorb?\n\t\t\t\tconsole.log(err);\n\t\t\t}\n\t\t\tthis._previousClassName = currentStyle;\n\t\t}\n\n\t\tlet context = this.canvas.getContext('2d');\n\t\tlet scale = 1.0;\n\n\t\tif (this.width === 0 || this.height === 0) { // Not visible\n\t\t\treturn;\n\t\t}\n\t\t// Set the canvas size from its container.\n\t\tthis.canvas.width = this.width;\n\t\tthis.canvas.height = this.height;\n\n\t\t// Background\n\t\tlet grd = context.createLinearGradient(0, 5, 0, this.height);\n\t\tgrd.addColorStop(0, this.boatOverviewColorConfig.displayBackgroundGradient.from); // 0  Beginning\n\t\tgrd.addColorStop(1, this.boatOverviewColorConfig.displayBackgroundGradient.to); // 1  End\n\t\tcontext.fillStyle = grd;\n\t\tcontext.fillRect(0, 0, this.width, this.height);\n\n\t\t// The actual Graph:\n\t\tlet maxSpeed = 5;\n\t\tmaxSpeed = Math.max(maxSpeed, this.sog);\n\t\tmaxSpeed = Math.max(maxSpeed, this.bsp);\n\t\tmaxSpeed = Math.max(maxSpeed, this.tws);\n\t\tmaxSpeed = Math.max(maxSpeed, this.aws);\n\t\tthis.speedScale = 5 * (Math.ceil(maxSpeed / 5));\n\n\t\tlet cWidth  = this.width;\n\t\tlet cHeight = this.height;\n\n\t\t// Circles\n\t\tlet center = this.getCanvasCenter();\n\t\tlet x = center.x;\n\t\tlet y = center.y;\n\n\t\tcontext.strokeStyle = this.boatOverviewColorConfig.gridColor;\n\t\tfor (let circ=1; circ<=this.speedScale; circ++) {\n\t\t\tlet radius = this._zoom * Math.round(circ * ((Math.min(cHeight, cWidth) / 2) / this.speedScale));\n\t\t\tcontext.beginPath();\n\t\t\tif (circ % 5 == 0) {\n\t\t\t\tcontext.lineWidth = 3;\n\t\t\t} else {\n\t\t\t\tcontext.lineWidth = 1;\n\t\t\t}\n\t\t\tcontext.arc(x, y, radius, 0, 2 * Math.PI);\n\t\t\tcontext.closePath();\n\t\t\tcontext.stroke();\n\t\t}\n\n\t\tthis.drawBoat(context, this.hdg);\n\t\tif (this._withWind && this._withTrueWind) {\n\t\t\tif (this._withGPS) {\n\t\t\t\tthis.drawTrueWind(context);\n\t\t\t\tthis.drawVW(context); // Speed Wind (Velocity)\n\t\t\t}\n\t\t}\n\t\tif (this._withWind) {\n\t\t\tthis.drawAppWind(context);\n\t\t}\n\t\tthis.drawBSP(context);\n\t\tif (this._withW) {\n\t\t\tthis.drawW(context);\n\t\t}\n\t\tthis.drawCMG(context);\n\t\tif (this._withGPS) {\n\t\t\tthis.drawSOG(context);\n\t\t}\n\t\tif (this._withCurrent && this._withGPS) {\n\t\t\tthis.drawCurrent(context);\n\t\t}\n\t\tif (this._withVMG && this._withGPS) {\n\t\t\tthis.drawVMG(context);\n\t\t}\n\t\t// Display values\n\t\t// See http://www.w3schools.com/tags/ref_entities.asp, &deg; = &#176;\n\t\tcontext.fillStyle = this.boatOverviewColorConfig.nmeaDataDisplayColor;\n\t\tcontext.font=\"bold 16px Courier New\";\n\t\tlet txtY = 20;\n\t\tvar space = 18;\n\t\tlet col1 = 10, col2 = 90;\n\t\tcontext.fillText(\"BSP\", col1, txtY);\n\t\tcontext.fillText(this.bsp + \" kts\", col2, txtY);\n\t\ttxtY += space;\n\t\tcontext.fillText(\"HDG\", col1, txtY);\n\t\tcontext.fillText(this.hdg.toFixed(0) + \" True\", col2, txtY);\n\t\ttxtY += space;\n\t\tif (this._withWind) {\n\t\t\tcontext.fillText(\"AWS\", col1, txtY);\n\t\t\tcontext.fillText(this.aws + \" kts\", col2, txtY);\n\t\t\ttxtY += space;\n\t\t\tcontext.fillText(\"AWA\", col1, txtY);\n\t\t\tcontext.fillText(this.awa + \"\", col2, txtY);\n\t\t}\n\n\t\tcontext.fillStyle = this.boatOverviewColorConfig.calculatedDataDisplayColor;\n\t\ttxtY += space;\n\t\tif (this._withWind && this._withTrueWind && this._withGPS) {\n\t\t\tcontext.fillText(\"TWS\", col1, txtY);\n\t\t\tcontext.fillText(this.tws.toFixed(2) + \" kts\", col2, txtY);\n\t\t\ttxtY += space;\n\t\t\tcontext.fillText(\"TWA\", col1, txtY);\n\t\t\tcontext.fillText(this.twa + \"\", col2, txtY);\n\t\t\ttxtY += space;\n\t\t\tcontext.fillText(\"TWD\", col1, txtY);\n\t\t\tcontext.fillText(this.twd + \"\", col2, txtY);\n\t\t\ttxtY += space;\n\t\t}\n\t\tif (this._withCurrent && this._withGPS) {\n\t\t\tcontext.fillText(\"CDR\", col1, txtY);\n\t\t\tcontext.fillText(this.cdr.toFixed(0) + \"\", col2, txtY);\n\t\t\ttxtY += space;\n\t\t\tcontext.fillText(\"CSP\", col1, txtY);\n\t\t\tcontext.fillText(this.csp.toFixed(2) + \" kts\", col2, txtY);\n\t\t}\n\t\ttxtY += space;\n\t\tcontext.fillText(\"leeway\", col1, txtY);\n\t\tcontext.fillText(this.lwy.toFixed(2) + \"\", col2, txtY);\n\t\ttxtY += space;\n\t\tcontext.fillText(\"CMG\", col1, txtY);\n\t\tcontext.fillText(this.cmg.toFixed(0) + \"\", col2, txtY);\n\n\t\tif (this._withVMG && this._withGPS) {\n\t\t\tlet mess = \", \";\n\t\t\tif (this.vmgOnWind) {\n\t\t\t\tmess += \"on wind\";\n\t\t\t} else {\n\t\t\t\tmess += (\"on WP [\" + this._wpName + \"]\");\n\t\t\t}\n\t\t\tcontext.fillStyle = this.boatOverviewColorConfig.vmgDataDisplayColor;\n\t\t\ttxtY += space;\n\t\t\tcontext.fillText(\"VMG\", col1, txtY);\n\t\t\tcontext.fillText(this.vmg.toFixed(2) + \" kts\" + mess, col2, txtY);\n\t\t}\n\n\t\tif (this._withW) {\n\t\t\tlet hdm = this.hdg + this.Decl;\n\t\t\tlet hdc = hdm + this.dev;\n\n\t\t\tcontext.fillStyle = this.boatOverviewColorConfig.dDWDataDisplayColor;\n\t\t\ttxtY += space;\n\t\t\tcontext.fillText(\"D\", col1, txtY);\n\t\t\tcontext.fillText(this.Decl.toFixed(1) + \"\", col2, txtY);\n\t\t\ttxtY += space;\n\t\t\tcontext.fillText(\"d\", col1, txtY);\n\t\t\tcontext.fillText(this.dev.toFixed(1) + \"\", col2, txtY);\n\t\t\ttxtY += space;\n\t\t\tcontext.fillText(\"W\", col1, txtY);\n\t\t\tcontext.fillText((this.Decl + this.dev).toFixed(1) + \"\", col2, txtY);\n\t\t\ttxtY += space;\n\t\t\tcontext.fillText(\"HDM\", col1, txtY);\n\t\t\tcontext.fillText(hdm.toFixed(1) + \"\", col2, txtY);\n\t\t\ttxtY += space;\n\t\t\tcontext.fillText(\"HDC\", col1, txtY);\n\t\t\tcontext.fillText(hdc.toFixed(1) + \"\", col2, txtY);\n\t\t}\n\n\t}\n}\n\nclass Point {\n\tconstructor(x, y) {\n\t\tthis.x = x;\n\t\tthis.y = y;\n\t}\n}\n\n\nclass Line {\n\n// Line with arrow head\n\tconstructor(x1, y1, x2, y2) {\n\t\tthis.x1 = x1;\n\t\tthis.y1 = y1;\n\t\tthis.x2 = x2;\n\t\tthis.y2 = y2;\n\n\t\tthis.HEAD_LENGTH = 20;\n\t\tthis.HEAD_WIDTH  =  6;\n\t}\n\n\n\trotate(p, angle) {\n\t\tlet r = new Point(Math.round((p.x * Math.cos(Utilities.toRadians(angle))) + (p.y * Math.sin(Utilities.toRadians(angle)))),\n\t\t\t\tMath.round((p.x * -Math.sin(Utilities.toRadians(angle))) + (p.y * Math.cos(Utilities.toRadians(angle)))));\n\t\treturn r;\n\t}\n\n\tdrawWithArrowhead(ctx) {\n\t\tthis.drawWithArrowheads(ctx, false);\n\t}\n\n\tdrawWithArrowheads(ctx, both) {\n\t\tif (both === undefined) {\n\t\t\tboth = true;\n\t\t}\n\t\t// draw the line\n\t\tctx.beginPath();\n\t\tctx.moveTo(this.x1, this.y1);\n\t\tctx.lineTo(this.x2, this.y2);\n\t\tctx.stroke();\n\n\t\tif (both) {\n\t\t\t// draw the starting arrowhead\n\t\t\tlet startRadians = Math.atan((this.y2 - this.y1) / (this.x2 - this.x1));\n\t\t\tstartRadians += ((this.x2 > this.x1) ? -90 : 90) * Math.PI / 180;\n\t\t\tthis.drawArrowhead(ctx, this.x1, this.y1, startRadians);\n\t\t}\n\t\t// draw the ending arrowhead\n\t\tlet endRadians = Math.atan((this.y2 - this.y1) / (this.x2 - this.x1));\n\t\tendRadians += ((this.x2 > this.x1) ? 90 : -90) * Math.PI / 180;\n\t\tthis.drawArrowhead(ctx, this.x2, this.y2, endRadians);\n\t}\n\n\tdrawWithAnemoArrowheads(ctx) {\n\t\t// draw the line\n\t\tctx.beginPath();\n\t\tctx.moveTo(this.x1, this.y1);\n\t\tctx.lineTo(this.x2, this.y2);\n\t\tctx.stroke();\n\n\t\tlet endRadians = Math.atan((this.y2 - this.y1) / (this.x2 - this.x1));\n\t\tendRadians += ((this.x2 > this.x1) ? 90 : -90) * Math.PI / 180;\n\t\tthis.drawArrowhead(ctx, this.x2 - (this.x2 - this.x1) / 2, this.y2 - (this.y2 - this.y1) / 2, endRadians);\n\t}\n\n\tdrawHollowArrow(ctx) {\n\t\tlet headLength = 30;\n\t\tlet arrowWidth = 10;\n\t\tlet headWidth = 20;\n\n\t\tlet dir = Utilities.getDir((this.x1 - this.x2), (this.y2 - this.y1));\n\t\tlet len = Math.sqrt(((this.x1 - this.x2) * (this.x1 - this.x2)) + ((this.y2 - this.y1) * (this.y2 - this.y1)));\n\n\t\tlet one, two, three, four, five, six, seven, eight;\n\t\tone = new Point(0, 0);\n\t\ttwo = new Point(-arrowWidth / 2, 0);\n\t\tthree = new Point(-arrowWidth / 2, -(Math.round(len - headLength)));\n\t\tfour = new Point(-headWidth / 2, -(Math.round(len - headLength)));\n\t\tfive = new Point(0, -Math.round(len)); // to\n\t\tsix = new Point(headWidth / 2, -(Math.round(len - headLength)));\n\t\tseven = new Point(arrowWidth / 2, -(Math.round(len - headLength)));\n\t\teight = new Point(arrowWidth / 2, 0);\n\t\tone = this.rotate(one, -dir);\n\t\ttwo = this.rotate(two, -dir);\n\t\tthree = this.rotate(three, -dir);\n\t\tfour = this.rotate(four, -dir);\n\t\tfive = this.rotate(five, -dir);\n\t\tsix = this.rotate(six, -dir);\n\t\tseven = this.rotate(seven, -dir);\n\t\teight = this.rotate(eight, -dir);\n\n\t\tlet x = [];\n\t\tlet y = [];\n\n\t\tx.push(this.x1 + one.x);\n\t\tx.push(this.x1 + two.x);\n\t\tx.push(this.x1 + three.x);\n\t\tx.push(this.x1 + four.x);\n\t\tx.push(this.x1 + five.x);\n\t\tx.push(this.x1 + six.x);\n\t\tx.push(this.x1 + seven.x);\n\t\tx.push(this.x1 + eight.x);\n\n\t\ty.push(this.y1 + one.y);\n\t\ty.push(this.y1 + two.y);\n\t\ty.push(this.y1 + three.y);\n\t\ty.push(this.y1 + four.y);\n\t\ty.push(this.y1 + five.y);\n\t\ty.push(this.y1 + six.y);\n\t\ty.push(this.y1 + seven.y);\n\t\ty.push(this.y1 + eight.y);\n\n\t\tctx.beginPath();\n\t\tctx.moveTo(x[0], y[0]);\n\t\tfor (let i = 1; i < x.length; i++) {\n\t\t\tctx.lineTo(x[i], y[i]);\n\t\t}\n\t\tctx.closePath();\n\t\tctx.stroke();\n\t}\n\n\tdrawArrowhead(ctx, x, y, radians) {\n\t\tctx.save();\n\t\tctx.beginPath();\n\t\tctx.translate(x, y);\n\t\tctx.rotate(radians);\n\t\tctx.moveTo(0, 0);\n\t\tctx.lineTo(this.HEAD_WIDTH, this.HEAD_LENGTH);\n\t\tctx.lineTo(-this.HEAD_WIDTH, this.HEAD_LENGTH);\n\t\tctx.closePath();\n\t\tctx.restore();\n\t\tctx.fill();\n\t}\n}\n\n// Associate the tag and the class\nwindow.customElements.define(BOAT_OVERVIEW_TAG_NAME, BoatOverview);\n"],"sourceRoot":""}