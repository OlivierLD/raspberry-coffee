<!DOCTYPE html>
<!--
 | Minimal display
 +-->
<html>
  <head>
    <!--meta charset="windows-1252"-->
    <!--meta charset="iso-8859-1"-->
    <!--meta charset="utf-8"-->
    <meta http-equiv="Content-Type" content="text/html;charset=ISO-8859-1">
    <title>NMEA Weather Station Console</title>

    <link rel="icon" type="image/ico" href="icons/hammerhead.02.ico">

    <link rel="stylesheet" href="css/stylesheet.css" type="text/css"/>

    <script type="text/javascript" src="js/jquery-2.1.3.js"></script>
    <script type="text/javascript" src="js/pub.sub.js"></script>
    <script type="text/javascript" src="js/ajax.manager.js"></script>

    <script type="text/javascript">

  window.onload = function() {
    initAjax(false);
    // Subscribers here
    events.subscribe('at', function(val) {
      console.log("Air Temperature : %f", val);
      $("#at").text(val.toFixed(2));
    });
    events.subscribe('prmsl', function(val) {
      console.log("Atm Pressure : %f", val);
	    $("#ap").text(val.toFixed(2));
    });
    events.subscribe('hum', function(val) {
	    console.log("Relative Humidity : %f", val);
	    $("#rh").text(val.toFixed(1));
    });
    events.subscribe('tws', function(val) {
	    console.log("Wind Speed : %f", val);
	    $("#ws").text(val.toFixed(2));
    });
    events.subscribe('twd', function(val) {
	    console.log("Wind Direction : %f", val);
	    $("#wd").text(val.toFixed(0));
    });
	  events.subscribe('prate', function(val) {
		  console.log("Precipitation Rate : %f", val);
		  $("#pr").text(val.toFixed(2));
	  });
	  events.subscribe('dew', function(val) {
		  console.log("Dew Point : %f", val);
		  $("#dp").text(val.toFixed(2));
	  });
  };

  var displayErr = function(err) {
    if (err !== undefined)
      document.getElementById("err-mess").innerHTML = ("<small>" + err + "</small>");
  };

  window.onresize = function() {
//  console.log("Re-evaluating window size");
    resizeComponents();
  };

  var resizeComponents = function() {
    var ww = window.innerWidth;
    var wh = window.innerHeight;


  };

    </script>
  </head>
  <body>
		<h3>Basic UI</h3>
		<table>
			<tr><td>Air Temperature</td><td><span id="at"></span>&deg;C</td></tr>
			<tr><td>Wind Speed</td><td><span id="ws"></span> knots</td></tr>
			<tr><td>Wind Direction</td><td><span id="wd"></span>&deg;</td></tr>
			<tr><td>Atm Pressure</td><td><span id="ap"></span> hPa</td></tr>
			<tr><td>Relative Humidity</td><td><span id="rh"></span>%</td></tr>
			<tr><td>Precipitation Rate</td><td><span id="pr"></span> mm/h</td></tr>
			<tr><td>Dew Point</td><td><span id="dp"></span>&deg;C</td></tr>
		</table>

    <div id="err-mess"></div>
		<hr/>
    <address>Oliv did it</address>
  </body>
</html>
