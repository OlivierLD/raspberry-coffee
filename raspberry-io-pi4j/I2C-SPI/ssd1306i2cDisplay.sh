#!/bin/bash
CP=./build/libs/I2C-SPI-1.0-all.jar
#
JAVA_OPTIONS=
JAVA_OPTIONS="${JAVA_OPTIONS} -Dverbose=false "
JAVA_OPTIONS="${JAVA_OPTIONS} -Dssd1306.verbose=false "
# JAVA_OPTIONS="${JAVA_OPTIONS} -Dmirror.screen=true"
#
# Separate the lines with a pipe |
#
if [[ "$1" = "IP" ]]
then
  _IP=$(hostname -I) || true
	if [[ "$_IP" ]]
	then
	  printf "My IP address is %s\n" "$_IP"
	fi
	#
	_OLED=`i2cdetect -y 1 | grep 3c`
	if [[ "$_OLED" ]]
	then
	  printf "+---------------+\n"
	  printf "| OLED Detected |\n"
	  printf "+---------------+\n"
	  MESS="$_IP | on RPi-Logger | default 192.168.127.1"
    sudo java ${JAVA_OPTIONS} -cp ${CP} i2c.samples.oled.OLEDSSD1306_I2C_DisplayStrings "$MESS"
	else
	  printf "| NO OLED Detected |\n"
	fi
else
	DATA=$1
  if [[ "$DATA" == "" ]]
  then
    echo -e "You should provide the string to display as parameter of this script..."
    DATA="No Data to Display"
  fi
  sudo java ${JAVA_OPTIONS} -cp ${CP} i2c.samples.oled.OLEDSSD1306_I2C_DisplayStrings "$DATA"
fi
#
