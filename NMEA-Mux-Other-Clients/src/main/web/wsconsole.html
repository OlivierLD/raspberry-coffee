<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>WebSockets Spy</title>
    <style>
        * {
        	font-family: "Source Code Pro", "Courier New", Helvetica, Geneva;
            /* font-family: tahoma; */
            font-size: 12px;
            padding: 0px;
            margin: 0px;
        }

        p {
            line-height: 18px;
        }
    </style>

    <link rel="icon" type="image/ico" href="favicon.ico">

    <script type="text/javascript">
        var statusFld;
        var filters;
        window.onload = () => {
            statusFld = document.getElementById("status");
            filters = document.getElementById("filters");
        };
    </script>
</head>
<body>
<table width="100%">
    <tr>
        <td valign="top"><h2>NMEA on WebSocket</h2></td>
    </tr>
    <tr>
        <td><input type="text" placeholder="Sentence filters, regular expression, like (RMC|GSA)+ ..." id="filters" style="width: 95%;" value=".*(VDR|RMC).*"></td>
    </tr>
    <tr>
        <td align="left">
            <div id="status" style="padding:5px; background:#ddd; border-radius:5px; overflow-y: scroll; border:1px solid #CCC; margin-top:10px; height: 200px;"></div>
        </td>
    </tr>
    <tr>
        <td valign="top" align="right"><a href="" onclick="javascript:resetStatus(); return false;" title="Clear status board"><small>Reset Status</small></a></td>
    </tr>
</table>
<hr/>
<script src="js/wsclient.js"></script>
<script type="text/javascript">
    if (false) { // This is just an example. Override the onmessage of websocket.
        console.log('Overriding onmessage');
        try {
            connection.onmessage = (mess) => {
                console.log(`Received ${mess.data}`);
            }
        } catch (error) {
            console.debug(`Oops: ${JSON.stringify(error)}`);
        }
    }
</script>
</body>
</html>
